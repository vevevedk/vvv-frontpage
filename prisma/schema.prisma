// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(cuid())
  email         String    @unique
  password      String
  first_name    String?
  last_name     String?
  phone         String?
  email_verified Boolean  @default(false)
  created_at    DateTime  @default(now())
  updated_at    DateTime  @updatedAt
  company       Company?
}

model Company {
  id        String   @id @default(cuid())
  name      String
  address   String?
  phone     String?
  email     String?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  user      User     @relation(fields: [userId], references: [id])
  userId    String   @unique
}

model clients {
  id   Int    @id @default(autoincrement())
  name String
  // ... other fields
}

model search_console_data {
  id          Int      @id @default(autoincrement())
  client_id   Int
  date        DateTime
  query       String
  page        String
  clicks      Int
  impressions Int
  position    Float
  ctr         Float
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  @@unique([client_id, date, query, page])
}

// Analytics Models
model PageView {
  id          String   @id @default(cuid())
  page        String   // URL or page identifier
  title       String?  // Page title
  referrer    String?  // Where the user came from
  user_agent  String?  // Browser/device info
  ip_address  String?  // IP address (consider privacy)
  country     String?  // Country from IP
  city        String?  // City from IP
  device_type String?  // mobile, desktop, tablet
  browser     String?  // Browser name
  os          String?  // Operating system
  session_id  String   // Unique session identifier
  created_at  DateTime @default(now())
  events      Event[]
  conversions Conversion[]
}

model Event {
  id          String   @id @default(cuid())
  category    String   // Event category (e.g., 'engagement', 'conversion')
  action      String   // What happened (e.g., 'click', 'scroll')
  label       String?  // Additional context
  value       Int?     // Numeric value if applicable
  page_view   PageView @relation(fields: [pageViewId], references: [id])
  pageViewId  String
  created_at  DateTime @default(now())
}

model Conversion {
  id          String   @id @default(cuid())
  type        String   // Type of conversion (e.g., 'signup', 'contact')
  value       Float?   // Conversion value if applicable
  page_view   PageView @relation(fields: [pageViewId], references: [id])
  pageViewId  String
  created_at  DateTime @default(now())
} 